<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nepal Public Service Reforms Timeline</title>
    
    <!-- Load React from local files instead of CDN for VS Code -->
    <script src="react.development.js"></script>
    <script src="react-dom.development.js"></script>
    <script src="babel.min.js"></script>
    
    <!-- Include Tailwind via CDN (you can download this locally too) -->
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        /* Base styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
        }

        /* Timeline item container */
        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            padding-left: 30px;
        }

        /* Timeline vertical line */
        .timeline-line {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #3b82f6;
        }

        /* Timeline dot */
        .timeline-dot {
            position: absolute;
            left: -4px;
            top: 50%;
            width: 10px;
            height: 10px;
            background-color: #3b82f6;
            border-radius: 50%;
            transform: translateY(-50%);
        }

        /* Card styles */
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateX(5px);
        }

        /* Button styles */
        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            margin: 0 5px;
        }

        .btn-edit {
            background-color: #3b82f6;
            color: white;
        }

        .btn-delete {
            background-color: #ef4444;
            color: white;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Root element for React -->
    <div id="root"></div>

    <!-- Main Script -->
    <script type="text/babel">
        // Initial timeline data
        const initialTimelineData = [
            {
                id: 1,
                year: "1957 | २०१४",
                title: {
                    en: "Work Efficiency Committee",
                    ne: "कार्य शीघ्र कारक समिति"
                },
                description: {
                    en: "King Mahendra established 'Quick Action Committee Act 2014'",
                    ne: "राजा महेन्द्रले 'कार्य शीघ्र कारक समिति ऐन, २०१४' जारी"
                }
            },
            // Add more initial data here
        ];

        // Timeline Item Component
        function TimelineItem({ item, onEdit, onDelete }) {
            const [isEditing, setIsEditing] = React.useState(false);
            const [language, setLanguage] = React.useState('en');
            const [formData, setFormData] = React.useState(item);

            // Handle form input changes
            const handleInputChange = (e, field, lang) => {
                if (lang) {
                    setFormData({
                        ...formData,
                        [field]: {
                            ...formData[field],
                            [lang]: e.target.value
                        }
                    });
                } else {
                    setFormData({
                        ...formData,
                        [field]: e.target.value
                    });
                }
            };

            // Save edited data
            const handleSave = () => {
                onEdit(formData);
                setIsEditing(false);
            };

            // Toggle language
            const toggleLanguage = () => {
                setLanguage(lang => lang === 'en' ? 'ne' : 'en');
            };

            // Render edit form
            if (isEditing) {
                return (
                    <div className="timeline-item">
                        <div className="card">
                            <div className="form-group">
                                <label className="form-label">Year</label>
                                <input
                                    className="form-input"
                                    value={formData.year}
                                    onChange={(e) => handleInputChange(e, 'year')}
                                />
                            </div>
                            {/* English inputs */}
                            <div className="form-group">
                                <label className="form-label">English Title</label>
                                <input
                                    className="form-input"
                                    value={formData.title.en}
                                    onChange={(e) => handleInputChange(e, 'title', 'en')}
                                />
                            </div>
                            <div className="form-group">
                                <label className="form-label">English Description</label>
                                <textarea
                                    className="form-input"
                                    value={formData.description.en}
                                    onChange={(e) => handleInputChange(e, 'description', 'en')}
                                />
                            </div>
                            {/* Nepali inputs */}
                            <div className="form-group">
                                <label className="form-label">Nepali Title</label>
                                <input
                                    className="form-input"
                                    value={formData.title.ne}
                                    onChange={(e) => handleInputChange(e, 'title', 'ne')}
                                />
                            </div>
                            <div className="form-group">
                                <label className="form-label">Nepali Description</label>
                                <textarea
                                    className="form-input"
                                    value={formData.description.ne}
                                    onChange={(e) => handleInputChange(e, 'description', 'ne')}
                                />
                            </div>
                            <div>
                                <button className="btn btn-edit" onClick={handleSave}>Save</button>
                                <button className="btn" onClick={() => setIsEditing(false)}>Cancel</button>
                            </div>
                        </div>
                    </div>
                );
            }

            // Render timeline item
            return (
                <div className="timeline-item">
                    <div className="timeline-line"></div>
                    <div className="timeline-dot"></div>
                    <div className="card">
                        <h3>{item.year}</h3>
                        <h4>{item.title[language]}</h4>
                        <p>{item.description[language]}</p>
                        <div>
                            <button className="btn" onClick={toggleLanguage}>
                                {language === 'en' ? 'नेपाली' : 'English'}
                            </button>
                            <button className="btn btn-edit" onClick={() => setIsEditing(true)}>
                                Edit
                            </button>
                            <button className="btn btn-delete" onClick={() => onDelete(item.id)}>
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        // Main Timeline Component
        function Timeline() {
            const [items, setItems] = React.useState(initialTimelineData);

            // Add new item
            const handleAdd = () => {
                const newItem = {
                    id: Date.now(),
                    year: "New Year | नयाँ वर्ष",
                    title: {
                        en: "New Title",
                        ne: "नयाँ शीर्षक"
                    },
                    description: {
                        en: "New Description",
                        ne: "नयाँ विवरण"
                    }
                };
                setItems([...items, newItem]);
            };

            // Edit item
            const handleEdit = (editedItem) => {
                setItems(items.map(item => 
                    item.id === editedItem.id ? editedItem : item
                ));
            };

            // Delete item
            const handleDelete = (id) => {
                if (confirm('Are you sure you want to delete this item?')) {
                    setItems(items.filter(item => item.id !== id));
                }
            };

            return (
                <div className="container">
                    <div className="header">
                        <h1 className="title">Nepal Public Service Reforms Timeline</h1>
                        <button className="btn btn-edit" onClick={handleAdd}>
                            Add New Entry
                        </button>
                    </div>
                    <div className="timeline">
                        {items.map(item => (
                            <TimelineItem
                                key={item.id}
                                item={item}
                                onEdit={handleEdit}
                                onDelete={handleDelete}
                            />
                        ))}
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.createRoot(document.getElementById('root')).render(
            <React.StrictMode>
                <Timeline />
            </React.StrictMode>
        );
    </script>
</body>
</html>
